# üìÅ blog/management/commands/create_sample_articles.py
# üõ†Ô∏è Management –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ç–∞—Ç–µ–π

from django.core.management.base import BaseCommand
from django.contrib.auth.models import User
from django.utils import timezone
from blog.models import Category, Article


class Command(BaseCommand):
    """üéØ –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ç–∞—Ç–µ–π –≤ –±–ª–æ–≥–µ"""
    help = '–°–æ–∑–¥–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ —Å—Ç–∞—Ç—å–∏ –¥–ª—è –±–ª–æ–≥–∞'

    def handle(self, *args, **options):
        """üöÄ –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∫–æ–º–∞–Ω–¥—ã"""

        # üë§ –ü–æ–ª—É—á–∞–µ–º –∏–ª–∏ —Å–æ–∑–¥–∞–µ–º –∞–≤—Ç–æ—Ä–∞
        author, created = User.objects.get_or_create(
            username='admin',
            defaults={
                'is_staff': True,
                'is_superuser': True,
                'email': 'admin@example.com'
            }
        )
        if created:
            author.set_password('admin')
            author.save()
            self.stdout.write(self.style.SUCCESS('‚úÖ –°–æ–∑–¥–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å admin'))

        # üìÇ –°–æ–∑–¥–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        categories_data = [
            {
                'name': '–°–æ–≤–µ—Ç—ã –ø–æ –≤—ã–±–æ—Ä—É',
                'slug': 'sovety-po-vyboru',
                'description': '–ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –ø–æ –≤—ã–±–æ—Ä—É –∞–≤—Ç–æ–∫–æ–≤—Ä–∏–∫–æ–≤'
            },
            {
                'name': '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –º–æ–Ω—Ç–∞–∂',
                'slug': 'ustanovka-i-montazh',
                'description': '–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∫–æ–≤—Ä–∏–∫–æ–≤'
            },
            {
                'name': '–£—Ö–æ–¥ –∏ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è',
                'slug': 'uhod-i-ekspluataciya',
                'description': '–ö–∞–∫ —É—Ö–∞–∂–∏–≤–∞—Ç—å –∑–∞ –∞–≤—Ç–æ–∫–æ–≤—Ä–∏–∫–∞–º–∏'
            },
            {
                'name': '–û–±–∑–æ—Ä—ã –º–æ–¥–µ–ª–µ–π',
                'slug': 'obzory-modeley',
                'description': '–û–±–∑–æ—Ä—ã —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π –∫–æ–≤—Ä–∏–∫–æ–≤'
            }
        ]

        for cat_data in categories_data:
            category, created = Category.objects.get_or_create(
                slug=cat_data['slug'],
                defaults=cat_data
            )
            if created:
                self.stdout.write(self.style.SUCCESS(f'‚úÖ –°–æ–∑–¥–∞–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è: {category.name}'))

        # üì∞ –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ —Å—Ç–∞—Ç—å–∏
        articles_data = [
            {
                'category_slug': 'sovety-po-vyboru',
                'title': '–ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å –∫–æ–≤—Ä–∏–∫–∏ –¥–ª—è BMW: –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ',
                'excerpt': '<p>–í—ã–±–æ—Ä –∞–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã—Ö –∫–æ–≤—Ä–∏–∫–æ–≤ –¥–ª—è BMW —Ç—Ä–µ–±—É–µ—Ç –æ—Å–æ–±–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è –∫ –¥–µ—Ç–∞–ª—è–º. –í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ –º—ã —Ä–∞—Å—Å–∫–∞–∂–µ–º –æ –≤—Å–µ—Ö –Ω—é–∞–Ω—Å–∞—Ö –≤—ã–±–æ—Ä–∞.</p>',
                'content': '''
                    <h2>–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ã–±—Ä–∞—Ç—å –∫–æ–≤—Ä–∏–∫–∏ –¥–ª—è BMW</h2>
                    <p>BMW - —ç—Ç–æ –ø—Ä–µ–º–∏–∞–ª—å–Ω—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å, –∫–æ—Ç–æ—Ä—ã–π —Ç—Ä–µ–±—É–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∞–∫—Å–µ—Å—Å—É–∞—Ä–æ–≤. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–¥–æ–±—Ä–∞–Ω–Ω—ã–µ –∫–æ–≤—Ä–∏–∫–∏ –Ω–µ —Ç–æ–ª—å–∫–æ –∑–∞—â–∏—â–∞—é—Ç —Å–∞–ª–æ–Ω, –Ω–æ –∏ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞—é—Ç —Å—Ç–∞—Ç—É—Å –∞–≤—Ç–æ–º–æ–±–∏–ª—è.</p>

                    <h3>–û—Å–Ω–æ–≤–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–±–æ—Ä–∞</h3>
                    <ul>
                        <li>–¢–æ—á–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–æ–¥–µ–ª–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è</li>
                        <li>–ö–∞—á–µ—Å—Ç–≤–æ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤</li>
                        <li>–¢–∏–ø –∫—Ä–µ–ø–ª–µ–Ω–∏—è</li>
                        <li>–î–∏–∑–∞–π–Ω –∏ —Ü–≤–µ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ</li>
                    </ul>

                    <h3>–ú–∞—Ç–µ—Ä–∏–∞–ª—ã –∫–æ–≤—Ä–∏–∫–æ–≤</h3>
                    <p>–î–ª—è BMW –º—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º —Å–ª–µ–¥—É—é—â–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã:</p>
                    <ol>
                        <li><strong>EVA (–≠–í–ê)</strong> - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª, —Å–æ—á–µ—Ç–∞—é—â–∏–π –ø—Ä–æ—á–Ω–æ—Å—Ç—å –∏ —ç–ª–∞—Å—Ç–∏—á–Ω–æ—Å—Ç—å</li>
                        <li><strong>–†–µ–∑–∏–Ω–∞ –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞</strong> - –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –≤–∞—Ä–∏–∞–Ω—Ç —Å –æ—Ç–ª–∏—á–Ω—ã–º–∏ –∑–∞—â–∏—Ç–Ω—ã–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏</li>
                        <li><strong>–¢–µ–∫—Å—Ç–∏–ª—å–Ω—ã–µ –∫–æ–≤—Ä–∏–∫–∏</strong> - –¥–ª—è –ª–µ—Ç–Ω–µ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ –∏ –∞–∫–∫—É—Ä–∞—Ç–Ω—ã—Ö –≤–æ–¥–∏—Ç–µ–ª–µ–π</li>
                    </ol>
                '''
            },
            {
                'category_slug': 'ustanovka-i-montazh',
                'title': '–ü–æ—à–∞–≥–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–≤—Ä–∏–∫–æ–≤ –≤ —Å–∞–ª–æ–Ω –∞–≤—Ç–æ–º–æ–±–∏–ª—è',
                'excerpt': '<p>–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–≤—Ç–æ–∫–æ–≤—Ä–∏–∫–æ–≤ - –∑–∞–ª–æ–≥ –∏—Ö –¥–æ–ª–≥–æ–π —Å–ª—É–∂–±—ã –∏ –≤–∞—à–µ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –°–ª–µ–¥—É–π—Ç–µ –Ω–∞—à–µ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.</p>',
                'content': '''
                    <h2>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —É—Å—Ç–∞–Ω–æ–≤–∫–µ</h2>
                    <p>–ü–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –Ω–æ–≤—ã—Ö –∫–æ–≤—Ä–∏–∫–æ–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ç—â–∞—Ç–µ–ª—å–Ω–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Å–∞–ª–æ–Ω –∞–≤—Ç–æ–º–æ–±–∏–ª—è.</p>

                    <h3>–®–∞–≥ 1: –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –∫–æ–≤—Ä–∏–∫–æ–≤</h3>
                    <p>–ê–∫–∫—É—Ä–∞—Ç–Ω–æ –∏–∑–≤–ª–µ–∫–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –∫–æ–≤—Ä–∏–∫–∏, –Ω–∞—á–∏–Ω–∞—è —Å –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –º–µ—Å—Ç–∞.</p>

                    <h3>–®–∞–≥ 2: –û—á–∏—Å—Ç–∫–∞ —Å–∞–ª–æ–Ω–∞</h3>
                    <p>–¢—â–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–ø—ã–ª–µ—Å–æ—Å—å—Ç–µ –ø–æ–ª —Å–∞–ª–æ–Ω–∞, —É–¥–∞–ª–∏—Ç–µ –≤—Å—é –≥—Ä—è–∑—å –∏ –º—É—Å–æ—Ä.</p>

                    <h3>–®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤—ã—Ö –∫–æ–≤—Ä–∏–∫–æ–≤</h3>
                    <p>–ù–∞—á–Ω–∏—Ç–µ —Å –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ–≤—Ä–∏–∫–∞, —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –æ–Ω –Ω–∞–¥–µ–∂–Ω–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –∫—Ä–µ–ø–ª–µ–Ω–∏—è–º–∏.</p>
                '''
            },
            {
                'category_slug': 'uhod-i-ekspluataciya',
                'title': '–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É—Ö–∞–∂–∏–≤–∞—Ç—å –∑–∞ EVA –∫–æ–≤—Ä–∏–∫–∞–º–∏',
                'excerpt': '<p>EVA –∫–æ–≤—Ä–∏–∫–∏ –Ω–µ–ø—Ä–∏—Ö–æ—Ç–ª–∏–≤—ã –≤ —É—Ö–æ–¥–µ, –Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–¥–ª–∏—Ç —Å—Ä–æ–∫ –∏—Ö —Å–ª—É–∂–±—ã.</p>',
                'content': '''
                    <h2>–†–µ–≥—É–ª—è—Ä–Ω—ã–π —É—Ö–æ–¥ –∑–∞ EVA –∫–æ–≤—Ä–∏–∫–∞–º–∏</h2>
                    <p>EVA –∫–æ–≤—Ä–∏–∫–∏ - —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –∑–∞—â–∏—Ç—ã —Å–∞–ª–æ–Ω–∞, –∫–æ—Ç–æ—Ä–æ–µ —Ç—Ä–µ–±—É–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —É—Ö–æ–¥–∞.</p>

                    <h3>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π —É—Ö–æ–¥</h3>
                    <ul>
                        <li>–í—ã—Ç—Ä—è—Ö–∏–≤–∞–π—Ç–µ –∫–æ–≤—Ä–∏–∫–∏ –æ—Ç –ø–µ—Å–∫–∞ –∏ –º–µ–ª–∫–æ–≥–æ –º—É—Å–æ—Ä–∞</li>
                        <li>–ü—Ä–æ—Ç–∏—Ä–∞–π—Ç–µ –≤–ª–∞–∂–Ω–æ–π —Ç—Ä—è–ø–∫–æ–π –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏</li>
                    </ul>

                    <h3>–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è —á–∏—Å—Ç–∫–∞</h3>
                    <p>–†–∞–∑ –≤ –Ω–µ–¥–µ–ª—é —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–≤–æ–¥–∏—Ç—å –±–æ–ª–µ–µ —Ç—â–∞—Ç–µ–ª—å–Ω—É—é –æ—á–∏—Å—Ç–∫—É:</p>
                    <ol>
                        <li>–ò–∑–≤–ª–µ–∫–∏—Ç–µ –∫–æ–≤—Ä–∏–∫–∏ –∏–∑ —Å–∞–ª–æ–Ω–∞</li>
                        <li>–ü—Ä–æ–º–æ–π—Ç–µ —Ç–µ–ø–ª–æ–π –≤–æ–¥–æ–π —Å –º—è–≥–∫–∏–º –º–æ—é—â–∏–º —Å—Ä–µ–¥—Å—Ç–≤–æ–º</li>
                        <li>–¢—â–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Å—É—à–∏—Ç–µ –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –æ–±—Ä–∞—Ç–Ω–æ</li>
                    </ol>
                '''
            },
            {
                'category_slug': 'obzory-modeley',
                'title': '–û–±–∑–æ—Ä –∫–æ–≤—Ä–∏–∫–æ–≤ ELEMENT –¥–ª—è Toyota Camry',
                'excerpt': '<p>–î–µ—Ç–∞–ª—å–Ω—ã–π –æ–±–∑–æ—Ä –ø–æ–ø—É–ª—è—Ä–Ω–æ–π –º–æ–¥–µ–ª–∏ –∫–æ–≤—Ä–∏–∫–æ–≤ ELEMENT –¥–ª—è Toyota Camry –≤—Å–µ—Ö –ø–æ–∫–æ–ª–µ–Ω–∏–π.</p>',
                'content': '''
                    <h2>–ö–æ–≤—Ä–∏–∫–∏ ELEMENT –¥–ª—è Toyota Camry</h2>
                    <p>ELEMENT - —ç—Ç–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å –∞–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã—Ö –∫–æ–≤—Ä–∏–∫–æ–≤ —Å –º–Ω–æ–≥–æ–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º.</p>

                    <h3>–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –º–æ–¥–µ–ª–∏</h3>
                    <ul>
                        <li>–¢–æ—á–Ω–æ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ —Ä–µ–ª—å–µ—Ñ–∞ –ø–æ–ª–∞</li>
                        <li>–í—ã—Å–æ–∫–∏–µ –±–æ—Ä—Ç–∏–∫–∏ –¥–æ 5 —Å–º</li>
                        <li>–ù–∞–¥–µ–∂–Ω—ã–µ –∫—Ä–µ–ø–ª–µ–Ω–∏—è</li>
                        <li>–≠–∫–æ–ª–æ–≥–∏—á–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã</li>
                    </ul>

                    <h3>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h3>
                    <table>
                        <tr>
                            <th>–ü–∞—Ä–∞–º–µ—Ç—Ä</th>
                            <th>–ó–Ω–∞—á–µ–Ω–∏–µ</th>
                        </tr>
                        <tr>
                            <td>–ú–∞—Ç–µ—Ä–∏–∞–ª</td>
                            <td>–¢–µ—Ä–º–æ–ø–ª–∞—Å—Ç–∏—á–Ω—ã–π —ç–ª–∞—Å—Ç–æ–º–µ—Ä</td>
                        </tr>
                        <tr>
                            <td>–í—ã—Å–æ—Ç–∞ –±–æ—Ä—Ç–∞</td>
                            <td>5 —Å–º</td>
                        </tr>
                        <tr>
                            <td>–í–µ—Å –∫–æ–º–ø–ª–µ–∫—Ç–∞</td>
                            <td>4.5 –∫–≥</td>
                        </tr>
                    </table>
                '''
            }
        ]

        for article_data in articles_data:
            category = Category.objects.get(slug=article_data['category_slug'])

            # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º slug –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞
            from django.utils.text import slugify
            base_slug = slugify(article_data['title'])
            slug = f"{base_slug}.html"

            article, created = Article.objects.get_or_create(
                slug=slug,
                defaults={
                    'title': article_data['title'],
                    'author': author,
                    'category': category,
                    'excerpt': article_data['excerpt'],
                    'content': article_data['content'],
                    'is_published': True,
                    'published_at': timezone.now(),
                    'featured_image': 'blog/articles/default.jpg'  # –ó–∞–≥–ª—É—à–∫–∞
                }
            )

            if created:
                self.stdout.write(self.style.SUCCESS(f'‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Å—Ç–∞—Ç—å—è: {article.title}'))

        self.stdout.write(self.style.SUCCESS('\nüéâ –í—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω—ã!'))
        self.stdout.write(
            self.style.WARNING('‚ö†Ô∏è  –ù–µ –∑–∞–±—É–¥—å—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è —Å—Ç–∞—Ç–µ–π —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É.'))