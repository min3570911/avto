üéØ –î–ï–¢–ê–õ–¨–ù–û–ï –û–ë–°–£–ñ–î–ï–ù–ò–ï –ö–û–ù–¶–ï–ü–¶–ò–ò –û–ë–©–ò–• –¢–ê–ë–õ–ò–¶
üìä –ß–¢–û –¢–ê–ö–û–ï "–û–ë–©–ò–ï –¢–ê–ë–õ–ò–¶–´"?
üóÑÔ∏è –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
–ï—Å—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã products:

products_product - —Ç–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä–æ–≤
products_category - —Ç–∞–±–ª–∏—Ü–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
products_productreview - —Ç–∞–±–ª–∏—Ü–∞ –æ—Ç–∑—ã–≤–æ–≤
products_color - —Ç–∞–±–ª–∏—Ü–∞ —Ü–≤–µ—Ç–æ–≤
accounts_cartitem - —Ç–∞–±–ª–∏—Ü–∞ –∫–æ—Ä–∑–∏–Ω—ã
products_wishlist - —Ç–∞–±–ª–∏—Ü–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ

üîß –ö–æ–Ω—Ü–µ–ø—Ü–∏—è "–æ–±—â–∏—Ö —Ç–∞–±–ª–∏—Ü" –æ–∑–Ω–∞—á–∞–µ—Ç:
–û–î–ù–ê —Ç–∞–±–ª–∏—Ü–∞ products_product —Å–æ–¥–µ—Ä–∂–∏—Ç –í–°–ï —Ç–æ–≤–∞—Ä—ã:

–ê–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã–µ –∫–æ–≤—Ä–∏–∫–∏
–õ–æ–¥–æ—á–Ω—ã–µ –∫–æ–≤—Ä–∏–∫–∏
–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –º–æ—Ç–æ—Ü–∏–∫–ª–µ—Ç–Ω—ã–µ –∫–æ–≤—Ä–∏–∫–∏
–õ—é–±—ã–µ –¥—Ä—É–≥–∏–µ —Ç–∏–ø—ã —Ç–æ–≤–∞—Ä–æ–≤

–û–î–ù–ê —Ç–∞–±–ª–∏—Ü–∞ products_category —Å–æ–¥–µ—Ä–∂–∏—Ç –í–°–ï –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:

BMW, Audi, Mercedes (–¥–ª—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π)
Yamaha, Mercury, Suzuki (–¥–ª—è –ª–æ–¥–æ–∫)
Honda, Kawasaki (–¥–ª—è –º–æ—Ç–æ—Ü–∏–∫–ª–æ–≤ –≤ –±—É–¥—É—â–µ–º)

üîç –ö–ê–ö –†–ê–ó–õ–ò–ß–ê–¢–¨ –¢–ò–ü–´ –¢–û–í–ê–†–û–í?
üè∑Ô∏è –ß–µ—Ä–µ–∑ –ø–æ–ª–µ category_type –≤ —Ç–∞–±–ª–∏—Ü–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π:
–¢–∞–±–ª–∏—Ü–∞ products_category:
id | category_name | category_type | slug     | description
1  | BMW          | cars          | bmw      | –ê–≤—Ç–æ–º–æ–±–∏–ª–∏ BMW
2  | Audi         | cars          | audi     | –ê–≤—Ç–æ–º–æ–±–∏–ª–∏ Audi  
3  | Yamaha       | boats         | yamaha   | –õ–æ–¥–∫–∏ Yamaha
4  | Mercury      | boats         | mercury  | –õ–æ–¥–∫–∏ Mercury
–¢–∞–±–ª–∏—Ü–∞ products_product:
id | product_name              | category_id | boat_mat_length | boat_mat_width
1  | –ö–æ–≤—Ä–∏–∫ BMW X5            | 1 (BMW)     | NULL           | NULL
2  | –ö–æ–≤—Ä–∏–∫ Audi A4           | 2 (Audi)    | NULL           | NULL
3  | –ö–æ–≤—Ä–∏–∫ Yamaha F150       | 3 (Yamaha)  | 300            | 120
4  | –ö–æ–≤—Ä–∏–∫ Mercury 15HP      | 4 (Mercury) | 280            | 110
üîç –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ —Å–≤—è–∑–∏:
–ê–≤—Ç–æ–º–æ–±–∏–ª–∏: Product.objects.filter(category__category_type='cars')
–õ–æ–¥–∫–∏: Product.objects.filter(category__category_type='boats')
üìã –î–ï–¢–ê–õ–¨–ù–´–ô –†–ê–ó–ë–û–† –ü–û–õ–ï–ô –í –û–ë–©–ï–ô –¢–ê–ë–õ–ò–¶–ï
üóÑÔ∏è –¢–∞–±–ª–∏—Ü–∞ products_product —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª—è –¥–ª—è –í–°–ï–• —Ç–∏–ø–æ–≤:
–û–±—â–∏–µ –ø–æ–ª—è (–¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤):

product_name - –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
slug - URL —Ç–æ–≤–∞—Ä–∞
category_id - —Å–≤—è–∑—å —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π
price - —Ü–µ–Ω–∞
product_desription - –æ–ø–∏—Å–∞–Ω–∏–µ
product_sku - –∞—Ä—Ç–∏–∫—É–ª
newest_product - –Ω–æ–≤–∏–Ω–∫–∞
page_title, meta_description - SEO

–°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π:

–ù–∏–∫–∞–∫–∏—Ö —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π (–∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏)

–°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –ª–æ–¥–æ–∫:

boat_mat_length - –¥–ª–∏–Ω–∞ –∫–æ–≤—Ä–∏–∫–∞ –ª–æ–¥–∫–∏
boat_mat_width - —à–∏—Ä–∏–Ω–∞ –∫–æ–≤—Ä–∏–∫–∞ –ª–æ–¥–∫–∏

–ü—Ä–∞–≤–∏–ª–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è:

–î–ª—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π: boat_mat_length = NULL, boat_mat_width = NULL
–î–ª—è –ª–æ–¥–æ–∫: boat_mat_length = 300, boat_mat_width = 120

üéØ –û–¢–ó–´–í–´ –í –û–ë–©–ò–• –¢–ê–ë–õ–ò–¶–ê–•
üìù –¢–∞–±–ª–∏—Ü–∞ products_productreview:
id | product_id | user_id | stars | content           | date_added
1  | 1 (BMW X5) | 101     | 5     | –û—Ç–ª–∏—á–Ω—ã–π –∫–æ–≤—Ä–∏–∫! | 2025-01-01
2  | 3 (Yamaha) | 102     | 4     | –•–æ—Ä–æ—à–æ –¥–ª—è –ª–æ–¥–∫–∏ | 2025-01-02
3  | 1 (BMW X5) | 103     | 5     | –†–µ–∫–æ–º–µ–Ω–¥—É—é BMW   | 2025-01-03
4  | 4 (Mercury)| 104     | 5     | –ò–¥–µ–∞–ª—å–Ω–æ —Å–∏–¥–∏—Ç   | 2025-01-04
–ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø —Ç–æ–≤–∞—Ä–∞ –≤ –æ—Ç–∑—ã–≤–µ:

–û—Ç–∑—ã–≤ id=1: review.product.category.category_type = 'cars' ‚Üí –∞–≤—Ç–æ–º–æ–±–∏–ª—å
–û—Ç–∑—ã–≤ id=2: review.product.category.category_type = 'boats' ‚Üí –ª–æ–¥–∫–∞

–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ—Ç–∑—ã–≤–æ–≤:

–û—Ç–∑—ã–≤—ã –æ–± –∞–≤—Ç–æ–º–æ–±–∏–ª—è—Ö: ProductReview.objects.filter(product__category__category_type='cars')
–û—Ç–∑—ã–≤—ã –æ –ª–æ–¥–∫–∞—Ö: ProductReview.objects.filter(product__category__category_type='boats')

üõí –ö–û–†–ó–ò–ù–ê –í –û–ë–©–ò–• –¢–ê–ë–õ–ò–¶–ê–•
üì¶ –¢–∞–±–ª–∏—Ü–∞ accounts_cartitem:
id | cart_id | product_id | kit_variant_id | has_podpyatnik | carpet_color | border_color | quantity
1  | 1       | 1 (BMW)    | 2 (salon)      | True           | black        | red          | 1
2  | 1       | 3 (Yamaha) | NULL           | False          | blue         | white        | 2  
3  | 2       | 2 (Audi)   | 1 (trunk)      | False          | gray         | black        | 1
4  | 2       | 4 (Mercury)| NULL           | False          | green        | yellow       | 1
–õ–æ–≥–∏–∫–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–ª–µ–π:
–î–ª—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π (BMW, Audi):

kit_variant_id = ID –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏ (—Å–∞–ª–æ–Ω/–±–∞–≥–∞–∂–Ω–∏–∫)
has_podpyatnik = True/False (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç)
carpet_color, border_color = –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ü–≤–µ—Ç–∞

–î–ª—è –ª–æ–¥–æ–∫ (Yamaha, Mercury):

kit_variant_id = NULL (–Ω–µ—Ç –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–π)
has_podpyatnik = False (–≤—Å–µ–≥–¥–∞, –Ω–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
carpet_color, border_color = –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ü–≤–µ—Ç–∞

üé® –¶–í–ï–¢–ê –í –û–ë–©–ò–• –¢–ê–ë–õ–ò–¶–ê–•
üåà –¢–∞–±–ª–∏—Ü–∞ products_color (–ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±—â–∞—è):
id | name    | color_type | hex_code | is_available
1  | –ß–µ—Ä–Ω—ã–π  | carpet     | #000000  | True
2  | –ö—Ä–∞—Å–Ω—ã–π | border     | #FF0000  | True  
3  | –°–∏–Ω–∏–π   | carpet     | #0000FF  | True
4  | –ë–µ–ª—ã–π   | border     | #FFFFFF  | True
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

–ê–≤—Ç–æ–º–æ–±–∏–ª–∏: –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±—ã–µ —Ü–≤–µ—Ç–∞ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã
–õ–æ–¥–∫–∏: –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ –∂–µ —Ü–≤–µ—Ç–∞
–ë—É–¥—É—â–∏–µ —Ç–∏–ø—ã: –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ –∂–µ —Ü–≤–µ—Ç–∞

–ù–∏–∫–∞–∫–∏—Ö –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–π! –û–¥–∏–Ω —Ü–≤–µ—Ç "–ß–µ—Ä–Ω—ã–π" –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤.
‚öôÔ∏è –ö–ê–ö –†–ê–ë–û–¢–ê–Æ–¢ –ü–†–ï–î–°–¢–ê–í–õ–ï–ù–ò–Ø (VIEWS)
üöó –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π (products/views.py):
–ö–∞—Ç–∞–ª–æ–≥ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π:
pythondef products_catalog(request):
    # –ü–æ–ª—É—á–∞–µ–º –¢–û–õ–¨–ö–û –∞–≤—Ç–æ–º–æ–±–∏–ª–∏ –∏–∑ –æ–±—â–µ–π —Ç–∞–±–ª–∏—Ü—ã
    products = Product.objects.filter(
        category__category_type='cars'  # –§–ò–õ–¨–¢–†!
    )
–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è:
pythondef get_product(request, slug):
    # –ü–æ–ª—É—á–∞–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å
    product = get_object_or_404(
        Product.objects.filter(category__category_type='cars'),
        slug=slug
    )
    
    # –û—Ç–∑—ã–≤—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è!
    reviews = ProductReview.objects.filter(product=product)
üõ•Ô∏è –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ª–æ–¥–æ–∫ (boats/views.py):
–ö–∞—Ç–∞–ª–æ–≥ –ª–æ–¥–æ–∫:
pythondef boat_category_list(request):
    # –ü–æ–ª—É—á–∞–µ–º –¢–û–õ–¨–ö–û –ª–æ–¥–∫–∏ –∏–∑ —Ç–æ–π –∂–µ –æ–±—â–µ–π —Ç–∞–±–ª–∏—Ü—ã
    products = Product.objects.filter(
        category__category_type='boats'  # –§–ò–õ–¨–¢–†!
    )
–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ª–æ–¥–∫–∏:
pythondef boat_product_detail(request, slug):
    # –ü–æ–ª—É—á–∞–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –ª–æ–¥–∫—É
    product = get_object_or_404(
        Product.objects.filter(category__category_type='boats'),
        slug=slug
    )
    
    # –û—Ç–∑—ã–≤—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è!
    reviews = ProductReview.objects.filter(product=product)
üîß –ö–ê–ö –†–ê–ë–û–¢–ê–ï–¢ –ê–î–ú–ò–ù–ö–ê
üöó –ê–¥–º–∏–Ω–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π:
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏:
pythonclass ProductAdmin(admin.ModelAdmin):
    def get_queryset(self, request):
        return super().get_queryset(request).filter(
            category__category_type='cars'
        )
–í —Å–ø–∏—Å–∫–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
–ü–æ–ª—è boat_mat_length, boat_mat_width —Å–∫—Ä—ã—Ç—ã –∏–ª–∏ –Ω–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É—é—Ç—Å—è.
üõ•Ô∏è –ê–¥–º–∏–Ω–∫–∞ –ª–æ–¥–æ–∫:
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ª–æ–¥–∫–∏:
pythonclass BoatProductAdmin(admin.ModelAdmin):
    def get_queryset(self, request):
        return super().get_queryset(request).filter(
            category__category_type='boats'
        )
–í —Å–ø–∏—Å–∫–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ª–æ–¥–æ—á–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
–ü–æ–ª—è boat_mat_length, boat_mat_width –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è.
–ü–æ–ª—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–π —Å–∫—Ä—ã—Ç—ã –∏–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è.
üìä –ü–õ–Æ–°–´ –û–ë–©–ò–• –¢–ê–ë–õ–ò–¶
‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

–ü—Ä–æ—Å—Ç–æ—Ç–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

–ú–µ–Ω—å—à–µ —Ç–∞–±–ª–∏—Ü
–ü—Ä–æ—â–µ –º–∏–≥—Ä–∞—Ü–∏–∏
–ï–¥–∏–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è


–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞:

–û–¥–∏–Ω –∫–æ–¥ –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤
–û–¥–∏–Ω –∫–æ–¥ –¥–ª—è –∫–æ—Ä–∑–∏–Ω—ã
–û–¥–∏–Ω –∫–æ–¥ –¥–ª—è –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
–û–¥–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∏—Å–∫–∞


–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:

–õ–µ–≥–∫–æ —Å—á–∏—Ç–∞—Ç—å –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤
–û–±—â–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –æ—Ç–∑—ã–≤–∞–º
–ï–¥–∏–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂


–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:

–õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø (–º–æ—Ç–æ—Ü–∏–∫–ª—ã)
–ù–µ –Ω—É–∂–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤


–û–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:

–ü–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º —Ç–∏–ø–∞–º —Ç–æ–≤–∞—Ä–æ–≤
–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤
–ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–∫–∏–¥–æ–∫



‚ùå –ú–ò–ù–£–°–´ –û–ë–©–ò–• –¢–ê–ë–õ–ò–¶
‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:

–°–º–µ—à–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:

–í –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ –ª–µ–∂–∞—Ç —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã
–ú–Ω–æ–≥–æ NULL –ø–æ–ª–µ–π –¥–ª—è –Ω–µ–ø—Ä–∏–º–µ–Ω–∏–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
–°–ª–æ–∂–Ω–µ–µ –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –±–∞–∑—ã


–°–ª–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤:

–ù—É–∂–Ω–æ –≤—Å–µ–≥–¥–∞ –ø–æ–º–Ω–∏—Ç—å –ø—Ä–æ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é
–†–∏—Å–∫ –ø–æ–∫–∞–∑–∞—Ç—å –Ω–µ —Ç–æ—Ç —Ç–∏–ø —Ç–æ–≤–∞—Ä–∞
–ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ JOIN-—ã


–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

–ë–æ–ª—å—à–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏
–ò–Ω–¥–µ–∫—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
–°–ª–æ–∂–Ω–µ–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞


–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å:

–ù—É–∂–Ω—ã –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∞–¥–º–∏–Ω–∫–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
–†–∏—Å–∫ –æ—à–∏–±–æ—á–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
–°–ª–æ–∂–Ω–µ–µ –±—ç–∫–∞–ø—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞



üîÑ –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ù–´–ï –ü–û–î–•–û–î–´
1. üóÇÔ∏è –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:

products_product - –∞–≤—Ç–æ–º–æ–±–∏–ª–∏
boats_boatproduct - –ª–æ–¥–∫–∏
motorcycles_motorcycleproduct - –º–æ—Ç–æ—Ü–∏–∫–ª—ã

2. üîó –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü:

–ë–∞–∑–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ base_product
–ù–∞—Å–ª–µ–¥—É–µ–º—ã–µ products_carproduct, boats_boatproduct

3. üéØ –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥:

–û–±—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–æ—Ç–∑—ã–≤—ã, —Ü–≤–µ—Ç–∞)
–û—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

ü§î –í–û–ü–†–û–°–´ –î–õ–Ø –û–ë–°–£–ñ–î–ï–ù–ò–Ø

–°—Ç–æ–∏—Ç –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞?
–ö–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –∫ –æ—Ç–∑—ã–≤–∞–º –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ?
–ö–∞–∫ –ª—É—á—à–µ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –∞–¥–º–∏–Ω–∫—É?
–ù—É–∂–Ω–∞ –ª–∏ –ø–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –ª–æ–¥–æ–∫ –æ—Ç –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π?
–ü–ª–∞–Ω–∏—Ä—É—é—Ç—Å—è –ª–∏ –¥—Ä—É–≥–∏–µ —Ç–∏–ø—ã —Ç–æ–≤–∞—Ä–æ–≤ –≤ –±—É–¥—É—â–µ–º?

üéØ –ß–¢–û –ö–û–ù–ö–†–ï–¢–ù–û –í–ê–° –ë–ï–°–ü–û–ö–û–ò–¢ –í –ö–û–ù–¶–ï–ü–¶–ò–ò –û–ë–©–ò–• –¢–ê–ë–õ–ò–¶?RetryA–Ω–µ—Ç. —è –±—ã —Ö–æ—Ç–µ–ª, —á—Ç–æ–±—ã —Ç—ã –ø–æ–¥–æ—à–µ–ª –±–æ–ª–µ–µ —Ç–æ–Ω–∫–æ. —Ä–∞–∑–¥–µ–ª–∏—Ç—å –ª–æ–¥–∫–∏ –∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏ –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤, –Ω–æ —Å –æ–±—â–∏–º–∏ –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤, –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –∏ –æ–±—â–µ–π –∫–æ—Ä–∑–∏–Ω–æ–π –∏ —Ä–∞–∑–¥–µ–ª—å–Ω—ã–º –∏–º–ø–æ—Ä—Ç–æ–º.Edit–†–∞–∑—Ä–∞–±–æ—Ç–∞–ª –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—é –∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.6s–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –±–æ–ª–µ–µ —Ç–æ–Ω–∫–∏–π –ø–æ–¥—Ö–æ–¥:

–û—Ç–¥–µ–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

products (–∞–≤—Ç–æ–º–æ–±–∏–ª–∏)
boats (–ª–æ–¥–∫–∏)


–û—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤:

products_product (–∞–≤—Ç–æ–º–æ–±–∏–ª–∏)
boats_boatproduct (–ª–æ–¥–∫–∏)


–û–±—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è:

–û—Ç–∑—ã–≤—ã
–ò–∑–±—Ä–∞–Ω–Ω–æ–µ
–ö–æ—Ä–∑–∏–Ω–∞
–¶–≤–µ—Ç–∞


–†–∞–∑–¥–µ–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç

–≠—Ç–æ –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –Ω–æ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π.
–û—Å–Ω–æ–≤–Ω—ã–µ –≤—ã–∑–æ–≤—ã:

–ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å –æ–±—â–∏–µ –æ—Ç–∑—ã–≤—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π —Ç–æ–≤–∞—Ä–æ–≤?
–ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å –æ–±—â—É—é –∫–æ—Ä–∑–∏–Ω—É –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤?
–ö–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç?

–†–µ—à–µ–Ω–∏—è:

Generic Foreign Key –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤, –∫–æ—Ä–∑–∏–Ω—ã, –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
ContentType framework Django
–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –±–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è –æ–±—â–∏—Ö –ø–æ–ª–µ–π
–û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏–º–ø–æ—Ä—Ç–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞

–≠—Ç–æ –±–æ–ª–µ–µ —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –¥–∞–µ—Ç:

–ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
–ì–∏–±–∫–æ—Å—Ç—å –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
–û–±—â—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≥–¥–µ –Ω—É–∂–Ω–æ
–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≥–¥–µ –Ω—É–∂–Ω–æ
üéØ –û–¢–õ–ò–ß–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê! –≠—Ç–æ –±–æ–ª–µ–µ —ç–ª–µ–≥–∞–Ω—Ç–Ω—ã–π –∏ –≥–∏–±–∫–∏–π –ø–æ–¥—Ö–æ–¥.
üèóÔ∏è –ì–ò–ë–†–ò–î–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê: –†–∞–∑–¥–µ–ª—å–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã + –û–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
üìä –°–¢–†–£–ö–¢–£–†–ê –ë–ê–ó–´ –î–ê–ù–ù–´–•
üöó –û–¢–î–ï–õ–¨–ù–´–ï –¢–ê–ë–õ–ò–¶–´ –î–õ–Ø –¢–û–í–ê–†–û–í:
sql-- –ê–≤—Ç–æ–º–æ–±–∏–ª–∏ (—Å–≤–æ—è —Ç–∞–±–ª–∏—Ü–∞)
products_product:
- id, product_name, slug, category_id, price, description
- (—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–æ–ª—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π)

-- –õ–æ–¥–∫–∏ (—Å–≤–æ—è —Ç–∞–±–ª–∏—Ü–∞) 
boats_boatproduct:
- id, product_name, slug, category_id, price, description  
- boat_mat_length, boat_mat_width (—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–æ–ª—è –ª–æ–¥–æ–∫)

-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–∂–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ
products_category     -- BMW, Audi, Mercedes
boats_boatcategory    -- Yamaha, Mercury, Suzuki
ü§ù –û–ë–©–ò–ï –¢–ê–ë–õ–ò–¶–´ –î–õ–Ø –§–£–ù–ö–¶–ò–ô:
sql-- –û—Ç–∑—ã–≤—ã (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ —á–µ—Ä–µ–∑ Generic FK)
common_productreview:
- id, content_type_id, object_id, user_id, stars, content
- content_type —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ products.Product –∏–ª–∏ boats.BoatProduct
- object_id —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–æ–≤–∞—Ä

-- –ö–æ—Ä–∑–∏–Ω–∞ (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —á–µ—Ä–µ–∑ Generic FK)
accounts_cartitem:
- id, cart_id, content_type_id, object_id, quantity
- carpet_color, border_color, kit_variant_id, has_podpyatnik

-- –ò–∑–±—Ä–∞–Ω–Ω–æ–µ (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ —á–µ—Ä–µ–∑ Generic FK)
common_wishlist:
- id, user_id, content_type_id, object_id
- carpet_color, border_color, kit_variant_id, has_podpyatnik

-- –¶–≤–µ—Ç–∞ (–ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±—â–∏–µ)
common_color:
- id, name, color_type, hex_code, is_available

üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø
1. üì¶ –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è –±–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å —Ç–æ–≤–∞—Ä–∞:
python# base/models.py
from django.contrib.contenttypes.models import ContentType
from django.contrib.contenttypes.fields import GenericForeignKey

class BaseProduct(BaseModel):
    """üîß –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è –º–æ–¥–µ–ª—å —Ç–æ–≤–∞—Ä–∞ - –æ–±—â–∏–µ –ø–æ–ª—è"""
    product_name = models.CharField(max_length=200)
    slug = models.SlugField(unique=True)
    price = models.IntegerField()
    product_desription = CKEditor5Field()
    newest_product = models.BooleanField(default=False)
    product_sku = models.CharField(max_length=50, unique=True)
    page_title = models.CharField(max_length=200, blank=True)
    meta_description = models.TextField(blank=True)
    
    class Meta:
        abstract = True  # ‚úÖ –ù–µ —Å–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É!
2. üöó –ú–æ–¥–µ–ª—å –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π:
python# products/models.py
from base.models import BaseProduct

class Category(BaseModel):
    """üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π"""
    category_name = models.CharField(max_length=100)
    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è

class Product(BaseProduct):
    """üöó –¢–æ–≤–∞—Ä—ã –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π - –Ω–∞—Å–ª–µ–¥—É–µ—Ç –æ–±—â–∏–µ –ø–æ–ª—è"""
    category = models.ForeignKey(Category, on_delete=models.CASCADE)
    
    # –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–æ–ª—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã)
    # car_specific_field = models.CharField(...)
    
    class Meta:
        db_table = 'products_product'  # ‚úÖ –°–≤–æ—è —Ç–∞–±–ª–∏—Ü–∞
3. üõ•Ô∏è –ú–æ–¥–µ–ª—å –ª–æ–¥–æ–∫:
python# boats/models.py  
from base.models import BaseProduct

class BoatCategory(BaseModel):
    """üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ª–æ–¥–æ–∫"""
    category_name = models.CharField(max_length=100)
    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è

class BoatProduct(BaseProduct):
    """üõ•Ô∏è –¢–æ–≤–∞—Ä—ã –ª–æ–¥–æ–∫ - –Ω–∞—Å–ª–µ–¥—É–µ—Ç –æ–±—â–∏–µ –ø–æ–ª—è"""
    category = models.ForeignKey(BoatCategory, on_delete=models.CASCADE)
    
    # –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–æ–ª—è –ª–æ–¥–æ–∫
    boat_mat_length = models.PositiveIntegerField(null=True, blank=True)
    boat_mat_width = models.PositiveIntegerField(null=True, blank=True)
    
    class Meta:
        db_table = 'boats_boatproduct'  # ‚úÖ –°–≤–æ—è —Ç–∞–±–ª–∏—Ü–∞
4. üìù –û–±—â–∏–µ –æ—Ç–∑—ã–≤—ã —á–µ—Ä–µ–∑ Generic FK:
python# common/models.py
from django.contrib.contenttypes.models import ContentType
from django.contrib.contenttypes.fields import GenericForeignKey

class ProductReview(BaseModel):
    """üìù –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –æ—Ç–∑—ã–≤—ã –¥–ª—è –ª—é–±—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤"""
    
    # Generic FK - –º–æ–∂–µ—Ç —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ –ª—é–±—É—é –º–æ–¥–µ–ª—å
    content_type = models.ForeignKey(ContentType, on_delete=models.CASCADE)
    object_id = models.PositiveIntegerField()
    product = GenericForeignKey('content_type', 'object_id')
    
    user = models.ForeignKey(User, on_delete=models.CASCADE)
    stars = models.IntegerField(choices=[(i, i) for i in range(1, 6)])
    content = models.TextField()
    date_added = models.DateTimeField(auto_now_add=True)
    
    class Meta:
        db_table = 'common_productreview'
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
python# –û—Ç–∑—ã–≤ –æ–± –∞–≤—Ç–æ–º–æ–±–∏–ª–µ
car_product = Product.objects.get(slug='bmw-x5')
ProductReview.objects.create(
    product=car_product,  # ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç content_type
    user=user,
    stars=5,
    content="–û—Ç–ª–∏—á–Ω—ã–π –∫–æ–≤—Ä–∏–∫ –¥–ª—è BMW!"
)

# –û—Ç–∑—ã–≤ –æ –ª–æ–¥–∫–µ  
boat_product = BoatProduct.objects.get(slug='yamaha-f150')
ProductReview.objects.create(
    product=boat_product,  # ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç content_type
    user=user,
    stars=4, 
    content="–•–æ—Ä–æ—à–∏–π –∫–æ–≤—Ä–∏–∫ –¥–ª—è –ª–æ–¥–∫–∏!"
)
5. üõí –û–±—â–∞—è –∫–æ—Ä–∑–∏–Ω–∞ —á–µ—Ä–µ–∑ Generic FK:
python# accounts/models.py
class CartItem(BaseModel):
    """üõí –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∫–æ—Ä–∑–∏–Ω—ã"""
    cart = models.ForeignKey(Cart, on_delete=models.CASCADE)
    
    # Generic FK - —Ç–æ–≤–∞—Ä –ª—é–±–æ–≥–æ —Ç–∏–ø–∞
    content_type = models.ForeignKey(ContentType, on_delete=models.CASCADE)
    object_id = models.PositiveIntegerField()
    product = GenericForeignKey('content_type', 'object_id')
    
    quantity = models.PositiveIntegerField(default=1)
    
    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–∞
    carpet_color = models.ForeignKey('common.Color', ...)
    border_color = models.ForeignKey('common.Color', ...)
    kit_variant = models.ForeignKey('products.KitVariant', null=True, blank=True)
    has_podpyatnik = models.BooleanField(default=False)
–õ–æ–≥–∏–∫–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è:
python# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –≤ –∫–æ—Ä–∑–∏–Ω—É
CartItem.objects.create(
    cart=cart,
    product=car_product,      # ‚úÖ –ê–≤—Ç–æ–º–æ–±–∏–ª—å
    kit_variant=salon_kit,    # ‚úÖ –ö–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∞
    has_podpyatnik=True,      # ‚úÖ –ü–æ–¥–ø—è—Ç–Ω–∏–∫ –∑–∞–ø–æ–ª–Ω–µ–Ω
    carpet_color=black,
    border_color=red
)

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ª–æ–¥–∫–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É
CartItem.objects.create(
    cart=cart,
    product=boat_product,     # ‚úÖ –õ–æ–¥–∫–∞
    kit_variant=None,         # ‚ùå –ö–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è NULL
    has_podpyatnik=False,     # ‚ùå –ü–æ–¥–ø—è—Ç–Ω–∏–∫ False
    carpet_color=blue,
    border_color=white
)

üéØ –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –ì–ò–ë–†–ò–î–ù–û–ì–û –ü–û–î–•–û–î–ê
‚úÖ –†–∞–∑–¥–µ–ª—å–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã:

–ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ: –ê–≤—Ç–æ–º–æ–±–∏–ª–∏ –∏ –ª–æ–¥–∫–∏ –≤ —Ä–∞–∑–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö
–°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–æ–ª—è: –ö–∞–∂–¥—ã–π —Ç–∏–ø –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
–ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –º–æ–¥–µ–ª–∏: –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–º —Ç–∏–ø–µ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –¥—Ä—É–≥–æ–π
–†–∞–∑–¥–µ–ª—å–Ω—ã–µ –∞–¥–º–∏–Ω–∫–∏: –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
–†–∞–∑–¥–µ–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç: –û—Ç–¥–µ–ª—å–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞

‚úÖ –û–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:

–ï–¥–∏–Ω—ã–µ –æ—Ç–∑—ã–≤—ã: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –≤—Å–µ —Å–≤–æ–∏ –æ—Ç–∑—ã–≤—ã –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
–û–±—â–∞—è –∫–æ—Ä–∑–∏–Ω–∞: –ú–æ–∂–Ω–æ –∑–∞–∫–∞–∑–∞—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã–π –∏ –ª–æ–¥–æ—á–Ω—ã–π –∫–æ–≤—Ä–∏–∫ –≤–º–µ—Å—Ç–µ
–ï–¥–∏–Ω–æ–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ: –í—Å–µ –ª—é–±–∏–º—ã–µ —Ç–æ–≤–∞—Ä—ã –≤ –æ–¥–Ω–æ–º —Å–ø–∏—Å–∫–µ
–û–±—â–∏–µ —Ü–≤–µ—Ç–∞: –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–≤–µ—Ç–æ–≤
–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –û–±—â–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π


üöÄ –°–¢–†–£–ö–¢–£–†–ê –ü–†–ò–õ–û–ñ–ï–ù–ò–ô
üìÅ –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞:
‚îú‚îÄ‚îÄ base/                    # üîß –û–±—â–∏–µ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ models.py           # BaseProduct, BaseCategory
‚îÇ   ‚îî‚îÄ‚îÄ utils.py            # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ
‚îú‚îÄ‚îÄ common/                  # ü§ù –û–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏  
‚îÇ   ‚îú‚îÄ‚îÄ models.py           # ProductReview, Color, Wishlist
‚îÇ   ‚îú‚îÄ‚îÄ views.py            # –û–±—â–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ admin.py            # –ê–¥–º–∏–Ω–∫–∞ –æ–±—â–∏—Ö –º–æ–¥–µ–ª–µ–π
‚îÇ
‚îú‚îÄ‚îÄ products/                # üöó –ê–≤—Ç–æ–º–æ–±–∏–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ models.py           # Product, Category, KitVariant
‚îÇ   ‚îú‚îÄ‚îÄ views.py            # –ö–∞—Ç–∞–ª–æ–≥ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ admin.py            # –ê–¥–º–∏–Ω–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ import_cars.py      # –ò–º–ø–æ—Ä—Ç –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ urls.py             # /products/
‚îÇ
‚îú‚îÄ‚îÄ boats/                   # üõ•Ô∏è –õ–æ–¥–∫–∏  
‚îÇ   ‚îú‚îÄ‚îÄ models.py           # BoatProduct, BoatCategory
‚îÇ   ‚îú‚îÄ‚îÄ views.py            # –ö–∞—Ç–∞–ª–æ–≥ –ª–æ–¥–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ admin.py            # –ê–¥–º–∏–Ω–∫–∞ –ª–æ–¥–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ import_boats.py     # –ò–º–ø–æ—Ä—Ç –ª–æ–¥–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ urls.py             # /boats/
‚îÇ
‚îî‚îÄ‚îÄ accounts/                # üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –∫–æ—Ä–∑–∏–Ω–∞
    ‚îú‚îÄ‚îÄ models.py           # Cart, CartItem (Generic FK)
    ‚îî‚îÄ‚îÄ views.py            # –ö–æ—Ä–∑–∏–Ω–∞ –∏ –∑–∞–∫–∞–∑—ã

üìä –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø
üîç –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–æ–≤ —Ç–æ–≤–∞—Ä–∞:
python# –î–ª—è –∞–≤—Ç–æ–º–æ–±–∏–ª—è
car_product = Product.objects.get(slug='bmw-x5')
reviews = ProductReview.objects.filter(
    content_type=ContentType.objects.get_for_model(Product),
    object_id=car_product.id
)

# –î–ª—è –ª–æ–¥–∫–∏
boat_product = BoatProduct.objects.get(slug='yamaha-f150')  
reviews = ProductReview.objects.filter(
    content_type=ContentType.objects.get_for_model(BoatProduct),
    object_id=boat_product.id
)

# –ò–ª–∏ —á–µ—Ä–µ–∑ Generic Relation (—É–¥–æ–±–Ω–µ–µ)
car_reviews = car_product.reviews.all()
boat_reviews = boat_product.reviews.all()
üìà –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
python# –í—Å–µ –æ—Ç–∑—ã–≤—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∞–≤—Ç–æ–º–æ–±–∏–ª–∏ + –ª–æ–¥–∫–∏)
user_reviews = ProductReview.objects.filter(user=user)

# –¢–æ–ø —Ç–æ–≤–∞—Ä—ã –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É (–ª—é–±—ã–µ —Ç–∏–ø—ã)
top_products = ProductReview.objects.values(
    'content_type', 'object_id'
).annotate(
    avg_rating=Avg('stars'),
    review_count=Count('id')
).filter(review_count__gte=5).order_by('-avg_rating')
üõí –ö–æ—Ä–∑–∏–Ω–∞ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏:
python# –ö–æ—Ä–∑–∏–Ω–∞ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª–∏ –∏ –ª–æ–¥–∫–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
cart_items = CartItem.objects.filter(cart=user_cart)

for item in cart_items:
    if isinstance(item.product, Product):
        print(f"–ê–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã–π –∫–æ–≤—Ä–∏–∫: {item.product.product_name}")
        print(f"–ö–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è: {item.kit_variant.name}")
        
    elif isinstance(item.product, BoatProduct):
        print(f"–õ–æ–¥–æ—á–Ω—ã–π –∫–æ–≤—Ä–∏–∫: {item.product.product_name}")
        print(f"–†–∞–∑–º–µ—Ä—ã: {item.product.boat_mat_length}√ó{item.product.boat_mat_width}")

üìã –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò
üîß –≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

–°–æ–∑–¥–∞—Ç—å base –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ - –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –º–æ–¥–µ–ª–∏
–°–æ–∑–¥–∞—Ç—å common –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ - –æ–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
–ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞—Ç—å products - –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –æ—Ç BaseProduct
–ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞—Ç—å boats - –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –æ—Ç BaseProduct
–û–±–Ω–æ–≤–∏—Ç—å accounts - Generic FK –≤ –∫–æ—Ä–∑–∏–Ω–µ
–°–æ–∑–¥–∞—Ç—å —Ä–∞–∑–¥–µ–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã - –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞
–û–±–Ω–æ–≤–∏—Ç—å —à–∞–±–ª–æ–Ω—ã - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤

