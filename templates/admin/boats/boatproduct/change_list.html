<!-- üìÅ templates/admin/boats/boatproduct/change_list.html -->
<!-- üìã –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –ª–æ–¥–æ–∫ + –∫–Ω–æ–ø–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –≤ —É–≥–ª—É -->
<!-- ‚úÖ –†–ï–®–ï–ù–ò–ï: –ù–∞—Å–ª–µ–¥—É–µ—Ç –æ–±—ã—á–Ω—ã–π —Å–ø–∏—Å–æ–∫, –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–Ω–æ–ø–∫—É –∏–º–ø–æ—Ä—Ç–∞ -->

{% extends "admin/change_list.html" %}
{% load i18n admin_urls static admin_list %}

{% block extrahead %}
    {{ block.super }}
    <style>
        .import-button {
            background: #0073aa;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            text-decoration: none;
            font-weight: bold;
            margin-left: 10px;
            display: inline-block;
        }
        
        .import-button:hover {
            background: #005a87;
            color: white;
            text-decoration: none;
        }
        
        .import-button:before {
            content: "üìä ";
        }
        
        .boats-header-stats {
            background: #f8f9fa;
            padding: 10px 15px;
            border-radius: 5px;
            margin-bottom: 15px;
            border-left: 4px solid #2196f3;
        }
        
        .stats-row {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .stat-number {
            font-weight: bold;
            color: #2196f3;
        }
    </style>
{% endblock %}

{% block object-tools-items %}
    {{ block.super }}
    {% if has_add_permission %}
        <li>
            <a href="{% url 'admin:boats_boatproduct_import' %}" class="import-button">
                –ò–º–ø–æ—Ä—Ç –ª–æ–¥–æ–∫ –∏–∑ Excel
            </a>
        </li>
    {% endif %}
{% endblock %}

{% block content %}
    <!-- üõ•Ô∏è –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ª–æ–¥–æ–∫ -->
    <div class="boats-header-stats">
        <div class="stats-row">
            <div class="stat-item">
                <span>üõ•Ô∏è</span>
                <span>–¢–æ–≤–∞—Ä–æ–≤ –ª–æ–¥–æ–∫:</span>
                <span class="stat-number">{{ cl.result_count }}</span>
            </div>
            {% if cl.result_count > 0 %}
            <div class="stat-item">
                <span>üìè</span>
                <span>–° —Ä–∞–∑–º–µ—Ä–∞–º–∏:</span>
                <span class="stat-number" id="boats-with-dimensions">-</span>
            </div>
            <div class="stat-item">
                <span>üì¶</span>
                <span>–í –Ω–∞–ª–∏—á–∏–∏:</span>
                <span class="stat-number" id="boats-in-stock">-</span>
            </div>
            {% endif %}
        </div>
    </div>
    
    {{ block.super }}
{% endblock %}

{% block extrajs %}
    {{ block.super }}
    <script>
        // üìä –ü–æ–¥—Å—á–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ª–æ–¥–æ–∫
        document.addEventListener('DOMContentLoaded', function() {
            const rows = document.querySelectorAll('#result_list tbody tr');
            let withDimensions = 0;
            let inStock = 0;
            
            rows.forEach(row => {
                // –ü–æ–¥—Å—á–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤ —Å —Ä–∞–∑–º–µ—Ä–∞–º–∏ (–∏—â–µ–º –∑–Ω–∞—á–æ–∫ üìè)
                const dimensionsCell = row.querySelector('td:nth-child(4)'); // –ö–æ–ª–æ–Ω–∫–∞ —Ä–∞–∑–º–µ—Ä–æ–≤
                if (dimensionsCell && dimensionsCell.textContent.includes('üìè')) {
                    withDimensions++;
                }
                
                // –ü–æ–¥—Å—á–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤ –≤ –Ω–∞–ª–∏—á–∏–∏ (–∏—â–µ–º —á–∏—Å–ª–∞ > 0 –≤ –∫–æ–ª–æ–Ω–∫–µ stock_quantity)
                const stockCell = row.querySelector('td:nth-child(7)'); // –ö–æ–ª–æ–Ω–∫–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤
                if (stockCell && parseInt(stockCell.textContent) > 0) {
                    inStock++;
                }
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            const dimensionsElement = document.getElementById('boats-with-dimensions');
            const stockElement = document.getElementById('boats-in-stock');
            
            if (dimensionsElement) {
                dimensionsElement.textContent = withDimensions;
            }
            
            if (stockElement) {
                stockElement.textContent = inStock;
            }
        });
    </script>
{% endblock %}

<!-- üîß –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ô:
‚úÖ –°–û–ó–î–ê–ù –ü–†–ê–í–ò–õ–¨–ù–´–ô –®–ê–ë–õ–û–ù CHANGE_LIST:
‚Ä¢ –ù–∞—Å–ª–µ–¥—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π admin/change_list.html
‚Ä¢ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—ã—á–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –ª–æ–¥–æ–∫
‚Ä¢ –î–æ–±–∞–≤–ª—è–µ—Ç –∫–Ω–æ–ø–∫—É "–ò–º–ø–æ—Ä—Ç –ª–æ–¥–æ–∫ –∏–∑ Excel" –≤ object-tools
‚Ä¢ –ö–Ω–æ–ø–∫–∞ –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É —Ä—è–¥–æ–º —Å "–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä"
‚Ä¢ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ª–æ–¥–æ–∫ –Ω–∞–¥ —Å–ø–∏—Å–∫–æ–º
‚Ä¢ JavaScript –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Å —Ä–∞–∑–º–µ—Ä–∞–º–∏

üõ•Ô∏è –†–ï–ó–£–õ–¨–¢–ê–¢:
‚Ä¢ –ü—Ä–∏ –∑–∞—Ö–æ–¥–µ –≤ "–¢–æ–≤–∞—Ä—ã –ª–æ–¥–æ–∫" - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤
‚Ä¢ –ö–Ω–æ–ø–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –≤ –ø—Ä–∞–≤–æ–º —É–≥–ª—É, —Ä—è–¥–æ–º —Å "–î–æ–±–∞–≤–∏—Ç—å"
‚Ä¢ –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–º–ø–æ—Ä—Ç–∞
‚Ä¢ –ö—Ä–∞—Å–∏–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ª–æ–¥–æ–∫

üéØ –°–¢–†–£–ö–¢–£–†–ê –§–ê–ô–õ–û–í:
templates/admin/boats/boatproduct/change_list.html - —ç—Ç–æ—Ç —Ñ–∞–π–ª
templates/admin/boats/import_boats.html - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–º–ø–æ—Ä—Ç–∞
-->