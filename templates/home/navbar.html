{% load static %}

<style>
  @media (max-width: 992px) {
    .widgets-wrap {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: flex-start;
      text-align: left;
      flex-wrap: nowrap;
    }

    .widget-header {
      margin-right: 10px;
    }

    .icontext {
      display: flex;
      align-items: center;
    }

    .icontext .text {
      text-align: left;
      white-space: nowrap;
    }

    .text span {
      display: block;
    }

    .text div {
      display: inline;
    }
  }

  /* üìÇ –°—Ç–∏–ª–∏ –¥–ª—è –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ –º–µ–Ω—é –∫–∞—Ç–∞–ª–æ–≥–∞ */
  .catalog-dropdown {
    min-width: 500px;
    max-width: 800px;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
  }

  .catalog-item {
    padding: 8px 15px;
    border-radius: 4px;
    transition: all 0.2s ease;
    text-decoration: none;
    color: #333;
  }

  .catalog-item:hover {
    background-color: #f8f9fa;
    color: #007bff;
    text-decoration: none;
    transform: translateX(5px);
  }

  .category-icon {
    flex-shrink: 0;
  }

  .dropdown-header {
    font-weight: 600;
    color: #495057;
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 10px;
    padding-bottom: 8px;
    border-bottom: 2px solid #e9ecef;
  }

  /* üì± –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
  @media (max-width: 768px) {
    .catalog-dropdown {
      min-width: 300px;
      max-width: 95vw;
    }

    .catalog-dropdown .row {
      margin: 0;
    }

    .catalog-dropdown .col-md-6 {
      padding: 0 5px;
    }
  }
</style>

<header class="section-header">
  <nav class="navbar navbar-dark navbar-expand-md bg-dark">
    <div class="container">
      <button
        class="navbar-toggler ml-auto"
        type="button"
        data-toggle="collapse"
        data-target="#navbarCollapse"
        aria-controls="navbarCollapse"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarCollapse">
        <ul class="navbar-nav mr-auto" style="gap: 20px;">
          <li class="nav-item"><a class="nav-link" href="{% url 'index' %}">–ì–ª–∞–≤–Ω–∞—è</a></li>

          <!-- üìÇ –ö–∞—Ç–∞–ª–æ–≥ —Å –≤—ã–ø–∞–¥–∞—é—â–∏–º –º–µ–Ω—é -->
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="catalogDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              –ö–∞—Ç–∞–ª–æ–≥
            </a>
            <div class="dropdown-menu catalog-dropdown" aria-labelledby="catalogDropdown">
              <a class="dropdown-item catalog-item d-flex align-items-center" href="{% url 'auto_catalog' %}">
                <span class="category-icon me-2" style="font-size: 20px;">üöó</span>
                <span>–ê–≤—Ç–æ–∫–æ–≤—Ä–∏–∫–∏</span>
              </a>
              <a class="dropdown-item catalog-item d-flex align-items-center" href="{% url 'boat_catalog' %}">
                <span class="category-icon me-2" style="font-size: 20px;">üõ•Ô∏è</span>
                <span>–ö–æ–≤—Ä–∏–∫–∏ –¥–ª—è –ª–æ–¥–æ–∫</span>
              </a>
            </div>
          </li>

          <li class="nav-item"><a class="nav-link" href="{% url 'product_reviews' %}">–û—Ç–∑—ã–≤—ã</a></li>
          <li class="nav-item"><a class="nav-link" href="{% url 'delivery' %}">–û–ø–ª–∞—Ç–∞ –∏ –¥–æ—Å—Ç–∞–≤–∫–∞</a></li>
          <li class="nav-item"><a class="nav-link" href="{% url 'blog:article_list' %}">–°—Ç–∞—Ç—å–∏</a></li>
          <li class="nav-item"><a class="nav-link" href="{% url 'about' %}">–û –Ω–∞—Å</a></li>
          <li class="nav-item"><a class="nav-link" href="{% url 'contact' %}">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>

          <!-- üíñ –ò–∑–±—Ä–∞–Ω–Ω–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–æ –≤ –∫–æ–Ω–µ—Ü -->
          {% if user.is_authenticated %}
            <li class="nav-item"><a class="nav-link" href="{% url 'wishlist' %}">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ ({{ request.user.wishlist.count }})</a></li>
          {% else %}
            <li class="nav-item"><a class="nav-link" href="{% url 'wishlist' %}">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</a></li>
          {% endif %}
        </ul>
      </div>
    </div>
  </nav>

  <section class="header-main border-bottom">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-lg-2 col-4">
          <div class="brand-wrap">
            <a href="{% url 'index' %}">
              <img class="logo" src="{% static 'images/logo.png' %}" />
            </a>
          </div>
        </div>
        <div class="col-lg-6 col-sm-12">
          <form method="GET" action="{% url 'product_search' %}" class="search">
            <div class="input-group w-100">
              <input type="text" class="form-control" name="q"
              placeholder="–ü–æ–∏—Å–∫" value="{{ query|default:"" }}"/>
              <div class="input-group-append">
                <button class="btn btn-primary" type="submit">
                  <i class="fa fa-search"></i>
                </button>
              </div>
            </div>
          </form>
        </div>

        <div class="col-lg-4 col-sm-6 col-8">
          <div class="widgets-wrap float-md-right">
            <!-- Cart Icon with badge -->
            <div class="widget-header mr-3">
              <a href="{% url 'cart' %}" class="icon icon-sm rounded-circle border">
                <i class="fa fa-shopping-cart"></i>
              </a>
              {% if user.is_authenticated %}
                <span class="badge badge-pill badge-danger notify">
                  {{request.user.profile.get_cart_count}}
                </span>
              {% else %}
                <span class="badge badge-pill badge-danger notify"></span>
              {% endif %}
            </div>
            
            <!-- –ë–ª–æ–∫ –ø—Ä–æ—Ñ–∏–ª—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω -->
          </div>
        </div>
      </div>
    </div>
  </section>
</header>